from cgitb import text
from xml.dom.minidom import Element
from requests import options
from selenium import webdriver
from selenium.webdriver.chrome.options import Options
import time
from bs4 import BeautifulSoup
links =['https://www.jusbrasil.com.br/diarios/1172398577/dou-secao-3-16-03-2022-pg-65', 'https://www.jusbrasil.com.br/diarios/1160175572/dou-secao-3-08-12-2021-pg-86', 'https://www.jusbrasil.com.br/diarios/1167652021/dou-secao-3-14-02-2022-pg-91', 'https://www.jusbrasil.com.br/diarios/1172886575/dou-secao-3-18-03-2022-pg-108', 'https://www.jusbrasil.com.br/diarios/1123472768/dou-secao-3-27-04-2021-pg-86', 'https://www.jusbrasil.com.br/diarios/1106915567/dou-secao-3-29-12-2020-pg-102', 'https://www.jusbrasil.com.br/diarios/1179164806/dou-secao-3-28-04-2022-pg-103', 'https://www.jusbrasil.com.br/diarios/212758848/dou-secao-3-11-10-2018-pg-75', 'https://www.jusbrasil.com.br/diarios/1178338385/dou-secao-3-25-04-2022-pg-90', 'https://www.jusbrasil.com.br/diarios/77833080/dou-secao-3-07-10-2014-pg-61', 'https://www.jusbrasil.com.br/diarios/1162376272/dou-secao-3-10-01-2022-pg-95', 'https://www.jusbrasil.com.br/diarios/243893512/dou-secao-3-28-05-2019-pg-65', 'https://www.jusbrasil.com.br/diarios/1138191427/dou-secao-3-27-07-2021-pg-96', 'https://www.jusbrasil.com.br/diarios/1170548650/dou-secao-3-04-03-2022-pg-89', 'https://www.jusbrasil.com.br/diarios/1171248016/dou-secao-3-09-03-2022-pg-98', 'https://www.jusbrasil.com.br/diarios/1155305170/dou-secao-3-09-11-2021-pg-88', 'https://www.jusbrasil.com.br/diarios/1139364119/dou-secao-3-03-08-2021-pg-79', 'https://www.jusbrasil.com.br/diarios/1137419141/dou-secao-3-22-07-2021-pg-93', 'https://www.jusbrasil.com.br/diarios/1117795610/dou-secao-3-19-03-2021-pg-73', 'https://www.jusbrasil.com.br/diarios/233282055/dou-secao-2-20-03-2019-pg-45', 'https://www.jusbrasil.com.br/diarios/1121732787/dou-secao-3-15-04-2021-pg-61', 'https://www.jusbrasil.com.br/diarios/1107988644/dou-secao-3-18-01-2021-pg-94', 'https://www.jusbrasil.com.br/diarios/1118289440/dou-secao-3-23-03-2021-pg-63', 'https://www.jusbrasil.com.br/diarios/1119735699/dou-secao-3-edicao-extra-a-01-04-2021-pg-65', 'https://www.jusbrasil.com.br/diarios/1120595285/dou-secao-3-08-04-2021-pg-75', 'https://www.jusbrasil.com.br/diarios/1180705603/dou-secao-3-06-05-2022-pg-97', 'https://www.jusbrasil.com.br/diarios/266730181/dou-secao-3-15-10-2019-pg-64', 'https://www.jusbrasil.com.br/diarios/1160175841/doemg-executivo-08-12-2021-pg-28', 'https://www.jusbrasil.com.br/diarios/286882176/dou-secao-3-10-03-2020-pg-57', 'https://www.jusbrasil.com.br/diarios/310918778/dou-secao-3-10-08-2020-pg-55', 'https://www.jusbrasil.com.br/diarios/1130354080/dou-secao-3-09-06-2021-pg-67', 'https://www.jusbrasil.com.br/diarios/1129449929/dou-secao-3-02-06-2021-pg-91', 'https://www.jusbrasil.com.br/diarios/224445648/dou-secao-3-21-01-2019-pg-81', 'https://www.jusbrasil.com.br/diarios/1125571771/dou-secao-3-10-05-2021-pg-60', 'https://www.jusbrasil.com.br/diarios/1179422989/dou-secao-3-29-04-2022-pg-98', 'https://www.jusbrasil.com.br/diarios/1132706851/dou-secao-3-23-06-2021-pg-99', 'https://www.jusbrasil.com.br/diarios/259699764/dou-secao-3-03-09-2019-pg-81', 'https://www.jusbrasil.com.br/diarios/252948612/dou-secao-3-24-07-2019-pg-72', 'https://www.jusbrasil.com.br/diarios/1130109722/dou-secao-3-08-06-2021-pg-186', 'https://www.jusbrasil.com.br/diarios/1128173491/dou-secao-3-25-05-2021-pg-67', 'https://www.jusbrasil.com.br/diarios/1140466167/dou-secao-3-10-08-2021-pg-75', 'https://www.jusbrasil.com.br/diarios/272120007/dou-secao-3-19-11-2019-pg-80', 'https://www.jusbrasil.com.br/diarios/294569023/dou-secao-3-27-04-2020-pg-54', 'https://www.jusbrasil.com.br/diarios/1177353289/dou-secao-3-14-04-2022-pg-72', 'https://www.jusbrasil.com.br/diarios/251609918/dou-secao-3-15-07-2019-pg-75', 'https://www.jusbrasil.com.br/diarios/1139846453/dou-secao-3-05-08-2021-pg-95', 'https://www.jusbrasil.com.br/diarios/301454775/dou-secao-3-10-06-2020-pg-69', 'https://www.jusbrasil.com.br/diarios/217890579/dou-secao-3-19-11-2018-pg-65', 'https://www.jusbrasil.com.br/diarios/1171679818/dou-secao-3-11-03-2022-pg-83', 'https://www.jusbrasil.com.br/diarios/307340023/dou-secao-3-17-07-2020-pg-63', 'https://www.jusbrasil.com.br/diarios/217890579/dou-secao-3-19-11-2018-pg-65', 'https://www.jusbrasil.com.br/diarios/277662437/dou-secao-3-03-01-2020-pg-58', 'https://www.jusbrasil.com.br/diarios/276374888/dou-secao-3-13-12-2019-pg-85', 'https://www.jusbrasil.com.br/diarios/285511706/dou-secao-3-28-02-2020-pg-82', 'https://www.jusbrasil.com.br/diarios/1174626450/dou-secao-3-29-03-2022-pg-73', 'https://www.jusbrasil.com.br/diarios/251609978/dou-secao-3-15-07-2019-pg-74', 'https://www.jusbrasil.com.br/diarios/228759297/dou-secao-3-18-02-2019-pg-86', 'https://www.jusbrasil.com.br/diarios/237748960/dou-secao-3-18-04-2019-pg-62', 'https://www.jusbrasil.com.br/diarios/266285006/dou-secao-3-11-10-2019-pg-73', 'https://www.jusbrasil.com.br/diarios/262738995/dou-secao-3-20-09-2019-pg-72', 'https://www.jusbrasil.com.br/diarios/210772177/dou-secao-3-28-09-2018-pg-78', 'https://www.jusbrasil.com.br/diarios/256132504/dou-secao-3-13-08-2019-pg-68', 'https://www.jusbrasil.com.br/diarios/1174626450/dou-secao-3-29-03-2022-pg-73', 'https://www.jusbrasil.com.br/diarios/252106012/dou-secao-3-18-07-2019-pg-63', 'https://www.jusbrasil.com.br/diarios/192942375/dou-secao-3-01-06-2018-pg-59', 'https://www.jusbrasil.com.br/diarios/255017655/dou-secao-3-06-08-2019-pg-86', 'https://www.jusbrasil.com.br/diarios/243400106/dou-secao-3-24-05-2019-pg-101', 'https://www.jusbrasil.com.br/diarios/269212312/dou-secao-3-30-10-2019-pg-92', 'https://www.jusbrasil.com.br/diarios/1178748507/doemg-executivo-26-04-2022-pg-47', 'https://www.jusbrasil.com.br/diarios/228090681/dou-secao-3-13-02-2019-pg-80', 'https://www.jusbrasil.com.br/diarios/287670913/dou-secao-3-16-03-2020-pg-59', 'https://www.jusbrasil.com.br/diarios/312965520/dou-secao-3-21-08-2020-pg-80', 'https://www.jusbrasil.com.br/diarios/127560890/dou-secao-3-07-10-2016-pg-87', 'https://www.jusbrasil.com.br/diarios/258499601/doemg-executivo-27-08-2019-pg-29', 'https://www.jusbrasil.com.br/diarios/275285213/dou-secao-3-06-12-2019-pg-87', 'https://www.jusbrasil.com.br/diarios/182808987/dou-secao-2-21-03-2018-pg-32', 'https://www.jusbrasil.com.br/diarios/147595213/dou-secao-3-24-05-2017-pg-75', 'https://www.jusbrasil.com.br/diarios/234453780/dou-secao-3-27-03-2019-pg-71', 'https://www.jusbrasil.com.br/diarios/251465889/doemg-executivo-13-07-2019-pg-39', 'https://www.jusbrasil.com.br/diarios/239501697/dou-secao-3-02-05-2019-pg-82', 'https://www.jusbrasil.com.br/diarios/208787087/dou-secao-3-17-09-2018-pg-64', 'https://www.jusbrasil.com.br/diarios/166147192/dou-secao-3-30-10-2017-pg-59', 'https://www.jusbrasil.com.br/diarios/199496852/dou-secao-2-17-07-2018-pg-29', 'https://www.jusbrasil.com.br/diarios/217750079/dou-secao-3-16-11-2018-pg-80', 'https://www.jusbrasil.com.br/diarios/196066334/dou-secao-3-21-06-2018-pg-55', 'https://www.jusbrasil.com.br/diarios/259699803/dou-secao-3-03-09-2019-pg-74', 'https://www.jusbrasil.com.br/diarios/104901437/rpi-marcas-24-11-2015-pg-2188', 'https://www.jusbrasil.com.br/diarios/261111350/dou-secao-3-11-09-2019-pg-104', 'https://www.jusbrasil.com.br/diarios/286317114/doemg-executivo-05-03-2020-pg-38', 'https://www.jusbrasil.com.br/diarios/143696178/dou-secao-3-19-04-2017-pg-61', 'https://www.jusbrasil.com.br/diarios/259699814/dou-secao-3-03-09-2019-pg-82', 'https://www.jusbrasil.com.br/diarios/275285113/dou-secao-3-06-12-2019-pg-88', 'https://www.jusbrasil.com.br/diarios/143696178/dou-secao-3-19-04-2017-pg-61', 'https://www.jusbrasil.com.br/diarios/277574978/doemg-executivo-24-12-2019-pg-41', 'https://www.jusbrasil.com.br/diarios/135081645/dou-secao-3-24-01-2017-pg-37', 'https://www.jusbrasil.com.br/diarios/128332034/al-mg-15-10-2016-pg-5', 'https://www.jusbrasil.com.br/diarios/268310180/doemg-executivo-24-10-2019-pg-39', 'https://www.jusbrasil.com.br/diarios/136519930/dou-secao-3-07-02-2017-pg-52', 'https://www.jusbrasil.com.br/diarios/1158269187/doemg-executivo-26-11-2021-pg-45', 'https://www.jusbrasil.com.br/diarios/238066795/doemg-executivo-23-04-2019-pg-26', 'https://www.jusbrasil.com.br/diarios/238066795/doemg-executivo-23-04-2019-pg-26', 'https://www.jusbrasil.com.br/diarios/69139847/dou-secao-3-16-04-2014-pg-85', 'https://www.jusbrasil.com.br/diarios/54095268/dou-secao-3-09-05-2013-pg-92', 'https://www.jusbrasil.com.br/diarios/1158269187/doemg-executivo-26-11-2021-pg-45', 'https://www.jusbrasil.com.br/diarios/66755808/dou-secao-3-24-02-2014-pg-79', 'https://www.jusbrasil.com.br/diarios/38945268/dou-secao-3-25-07-2012-pg-58', 'https://www.jusbrasil.com.br/diarios/69287838/dou-secao-3-23-04-2014-pg-51', 'https://www.jusbrasil.com.br/diarios/41800192/dou-secao-3-26-10-2012-pg-91', 'https://www.jusbrasil.com.br/diarios/53391362/dou-secao-2-22-04-2013-pg-29', 'https://www.jusbrasil.com.br/diarios/72874940/dou-secao-2-11-07-2014-pg-31', 'https://www.jusbrasil.com.br/diarios/55827366/dou-secao-3-21-06-2013-pg-78', 'https://www.jusbrasil.com.br/diarios/58908622/dou-secao-3-10-09-2013-pg-71', 'https://www.jusbrasil.com.br/diarios/44555511/dou-secao-3-20-12-2012-pg-83', 'https://www.jusbrasil.com.br/diarios/38427707/dou-secao-3-04-07-2012-pg-62', 'https://www.jusbrasil.com.br/diarios/55199790/dou-secao-3-06-06-2013-pg-68', 'https://www.jusbrasil.com.br/diarios/40829517/dou-secao-3-25-09-2012-pg-78', 'https://www.jusbrasil.com.br/diarios/53927186/dou-secao-3-06-05-2013-pg-59', 'https://www.jusbrasil.com.br/diarios/34415517/dou-secao-3-14-02-2012-pg-43', 'https://www.jusbrasil.com.br/diarios/39567530/doemg-noticiario-15-08-2012-pg-6', 'https://www.jusbrasil.com.br/diarios/50980001/dou-secao-3-19-02-2013-pg-60', 'https://www.jusbrasil.com.br/diarios/37859113/dou-secao-3-14-06-2012-pg-56', 'https://www.jusbrasil.com.br/diarios/26195822/pg-71-secao-3-diario-oficial-da-uniao-dou-de-20-04-2011', 'https://www.jusbrasil.com.br/diarios/25002603/pg-48-secao-3-diario-oficial-da-uniao-dou-de-24-02-2011', 'https://www.jusbrasil.com.br/diarios/33410174/dou-secao-3-04-01-2012-pg-61', 'https://www.jusbrasil.com.br/diarios/20864525/pg-60-secao-3-diario-oficial-da-uniao-dou-de-04-11-2010', 'https://www.jusbrasil.com.br/diarios/31239988/pg-67-secao-3-diario-oficial-da-uniao-dou-de-06-10-2011', 'https://www.jusbrasil.com.br/diarios/31371612/pg-56-secao-3-diario-oficial-da-uniao-dou-de-11-10-2011', 'https://www.jusbrasil.com.br/diarios/38945267/dou-secao-3-25-07-2012-pg-57', 'https://www.jusbrasil.com.br/diarios/7246398/pg-51-secao-3-diario-oficial-da-uniao-dou-de-05-08-2010', 'https://www.jusbrasil.com.br/diarios/20420687/pg-1-publicacoes-de-terceiros-diario-oficial-do-estado-de-minas-gerais-doemg-de-14-10-2010', 'https://www.jusbrasil.com.br/diarios/26455373/pg-1-publicacoes-de-terceiros-diario-oficial-do-estado-de-minas-gerais-doemg-de-03-05-2011', 'https://www.jusbrasil.com.br/diarios/24594631/pg-42-secao-3-diario-oficial-da-uniao-dou-de-07-02-2011', 'https://www.jusbrasil.com.br/diarios/24098037/pg-51-secao-3-diario-oficial-da-uniao-dou-de-11-01-2011', 'https://www.jusbrasil.com.br/diarios/26438861/pg-26-secao-2-diario-oficial-da-uniao-dou-de-03-05-2011', 'https://www.jusbrasil.com.br/diarios/54289370/doemg-executivo-21-08-2012-pg-43', 'https://www.jusbrasil.com.br/diarios/30613280/pg-47-executivo-e-legislativo-diario-oficial-do-estado-de-minas-gerais-doemg-de-16-09-2011', 'https://www.jusbrasil.com.br/diarios/400917/pg-37-secao-3-diario-oficial-da-uniao-dou-de-04-03-2008', 'https://www.jusbrasil.com.br/diarios/327402/pg-37-secao-3-diario-oficial-da-uniao-dou-de-10-06-2005', 'https://www.jusbrasil.com.br/diarios/326086/pg-38-secao-3-diario-oficial-da-uniao-dou-de-06-06-2005', 'https://www.jusbrasil.com.br/diarios/414467/pg-10-secao-2-diario-oficial-da-uniao-dou-de-06-01-2005', 'https://www.jusbrasil.com.br/diarios/1144529/pg-24-secao-3-diario-oficial-da-uniao-dou-de-05-05-1995', 'https://www.jusbrasil.com.br/diarios/1475941/pg-52-secao-3-diario-oficial-da-uniao-dou-de-22-11-1999', 'https://www.jusbrasil.com.br/diarios/1464914/pg-25-secao-3-diario-oficial-da-uniao-dou-de-02-10-1997', 'https://www.jusbrasil.com.br/diarios/1323502/pg-16-secao-2-diario-oficial-da-uniao-dou-de-26-07-1999']
universidade = int(input("[0] -> UFMG\n[1] -> USP\n\nDigite sua opção: "))
lista_patente_link=[]
patentes = []
print("segundos:",len(links)*7, "\nminutos:" ,(len(links)*7)/60, "\nhoras: ", ((len(links)*7)/60)/60)
def ler_todos_links():
    l=121
    while l<= 157:
        print("segundos:",(len(links)-l)*7, "\nminutos:" ,((len(links)-l)*7)/60, "\nhoras: ", (((len(links)-l)*7)/60)/60)
        try:
            #==============|| inicalizando a busca a partir dos links gerados ||===============#
            option = Options()
            option.headless = True
            driver = webdriver.Chrome()
            driver.get(links[l])

            #==============|| buscando os dados e encerrando a consulta ||===============#
            documento = driver.find_element_by_class_name('DocumentView-content-text')
            html_documento = html = documento.get_attribute('outerHTML')
            soup_documento = BeautifulSoup(html_documento, 'html.parser')
            driver.quit()

            #==============|| banco_de_listas[0] = UFMG/ banco_de_listas[1] = USP ||===============#
            banco_de_listas=[
            #==============|| banco de palavras que validam em sua maior parte uma patente (UFMG) ||===============#
            ['Tecnologia','Licenciamento','exclusividade','LICENCIANTES','LICENCIADA','Espécie', 'Tecnológica', 'Inovação', 'Objeto', 'INPI'], 
            #==============|| banco de palavras que validam em sua maior parte uma patente (USP) ||===============#
            ['Exclusiva', 'USP', 'Licença', 'Modalidade', 'Tecnologia', 'Parecer Jurídico', 'Exploração', 'Objeto', 'Vigência', 'Licenciamento', 'patente']]


            #==============|| localizando a tag p que contem as possiveis patentes e adicionando em uma lista ||===============#

            def find_patente():
                maybe_patente = []
                j=0
                while j <= len(soup_documento.find_all(name='p')):
                    i=0
                    while True:
                        try:
                            if(str(soup_documento.find_all(name='p')[j]).find(banco_de_listas[universidade][i]) > 0):
                                maybe_patente.append(j)
                                if(maybe_patente.count(j)>=4):
                                    if soup_documento.find_all(name='p')[j] in patentes:
                                        break  
                                    else:
                                        if str(soup_documento.find_all(name='p')[j]).find('Programas de Computador') ==-1:
                                            patentes.append(soup_documento.find_all(name='p')[j])
                                            lista_patente_link.append([links[l],soup_documento.find_all(name='p')[j]])
                                                        
                        except:
                            break
                        i+=1
                    j+=1
            find_patente()
        except:
            break
        l+=1

ler_todos_links()
j=0

#==============|| estrutura de repetição para exibir todas as possiveis patentes em uma lista ||===============#
while True:
    try:
        print("\n\n",j,': ', lista_patente_link[j][0],"\n",str(lista_patente_link[j][1])[66:])
        #print("\n\n",j,str(patentes[j])[66:])
    except:
        print("F")
        break
    j+=1